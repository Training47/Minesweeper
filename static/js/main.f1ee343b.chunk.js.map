{"version":3,"sources":["component/Cell.js","component/Board.js","index.js"],"names":["Cell","value","this","props","isRevealed","isMine","neighbour","isFlagged","onClick","cMenu","className","onContextMenu","getValue","React","Component","Board","state","boardData","initBoardData","height","width","mines","gameStatus","mineCount","data","mineArray","map","datarow","dataitem","push","dimension","Math","floor","random","createEmptyArray","plantMines","getNeighbours","i","j","x","y","isEmpty","randomx","randomy","minesPlanted","getRandomNumber","updatedData","mine","traverseBoard","el","setState","revealEmpty","revealBoard","alert","getHidden","length","getFlags","e","preventDefault","getMines","FlagArray","JSON","stringify","key","handleCellClick","handleContextMenu","renderBoard","Game","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f1ee343b.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class Cell extends React.Component {\n  getValue() {\n    const { value } = this.props;\n\n    if (!value.isRevealed) {\n      return this.props.value.isFlagged ? \"ðŸš©\" : null;\n    }\n    if (value.isMine) {\n      return \"ðŸ’£\";\n    }\n    if (value.neighbour === 0) {\n      return null;\n    }\n    return value.neighbour;\n  }\n\n  render() {\n    const { value, onClick, cMenu } = this.props;\n    let className =\n      \"cell\" +\n      (value.isRevealed ? \"\" : \" hidden\") +\n      (value.isMine ? \" is-mine\" : \"\") +\n      (value.isFlagged ? \" is-flag\" : \"\");\n\n    return (\n      <div\n        onClick={onClick}\n        className={className}\n        onContextMenu={cMenu}\n      >\n        {this.getValue()}\n      </div>\n    );\n  }\n}\n\nconst cellItemShape = {\n    isRevealed: PropTypes.bool,\n    isMine: PropTypes.bool,\n    isFlagged: PropTypes.bool\n}\n\nCell.propTypes = {\n  value: PropTypes.objectOf(PropTypes.shape(cellItemShape)),\n  onClick: PropTypes.func,\n  cMenu: PropTypes.func\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Cell from './Cell';\n\nexport default class Board extends React.Component {\n  state = {\n    boardData: this.initBoardData(this.props.height, this.props.width, this.props.mines),\n    gameStatus: \"Game in progress\",\n    mineCount: this.props.mines,\n  };\n\n  /* Helper Functions */\n\n  // get mines\n  getMines(data) {\n    let mineArray = [];\n\n    data.map(datarow => {\n      datarow.map((dataitem) => {\n        if (dataitem.isMine) {\n          mineArray.push(dataitem);\n        }\n      });\n    });\n\n    return mineArray;\n  }\n\n  // get Flags\n  getFlags(data) {\n    let mineArray = [];\n\n    data.map(datarow => {\n      datarow.map((dataitem) => {\n        if (dataitem.isFlagged) {\n          mineArray.push(dataitem);\n        }\n      });\n    });\n\n    return mineArray;\n  }\n\n  // get Hidden cells\n  getHidden(data) {\n    let mineArray = [];\n\n    data.map(datarow => {\n      datarow.map((dataitem) => {\n        if (!dataitem.isRevealed) {\n          mineArray.push(dataitem);\n        }\n      });\n    });\n\n    return mineArray;\n  }\n\n  // get random number given a dimension\n  getRandomNumber(dimension) {\n    // return Math.floor(Math.random() * dimension);\n    return Math.floor((Math.random() * 1000) + 1) % dimension;\n  }\n\n  // Gets initial board data\n  initBoardData(height, width, mines) {\n    let data = this.createEmptyArray(height, width);\n    data = this.plantMines(data, height, width, mines);\n    data = this.getNeighbours(data, height, width);\n    return data;\n  }\n\n  createEmptyArray(height, width) {\n    let data = [];\n\n    for (let i = 0; i < height; i++) {\n      data.push([]);\n      for (let j = 0; j < width; j++) {\n        data[i][j] = {\n          x: i,\n          y: j,\n          isMine: false,\n          neighbour: 0,\n          isRevealed: false,\n          isEmpty: false,\n          isFlagged: false,\n        };\n      }\n    }\n    return (data);\n  }\n\n  // plant mines on the board\n  plantMines(data, height, width, mines) {\n    let randomx, randomy, minesPlanted = 0;\n\n    while (minesPlanted < mines) {\n      randomx = this.getRandomNumber(width);\n      randomy = this.getRandomNumber(height);\n      if (!(data[randomx][randomy].isMine)) {\n        data[randomx][randomy].isMine = true;\n        minesPlanted++;\n      }\n    }\n\n    return (data);\n  }\n\n  // get number of neighbouring mines for each board cell\n  getNeighbours(data, height, width) {\n    let updatedData = data;\n\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        if (data[i][j].isMine !== true) {\n          let mine = 0;\n          const area = this.traverseBoard(data[i][j].x, data[i][j].y, data);\n          area.map(value => {\n            if (value.isMine) {\n              mine++;\n            }\n          });\n          if (mine === 0) {\n            updatedData[i][j].isEmpty = true;\n          }\n          updatedData[i][j].neighbour = mine;\n        }\n      }\n    }\n\n    return (updatedData);\n  };\n\n  // looks for neighbouring cells and returns them\n  traverseBoard(x, y, data) {\n    const el = [];\n\n    //up\n    if (x > 0) {\n      el.push(data[x - 1][y]);\n    }\n\n    //down\n    if (x < this.props.height - 1) {\n      el.push(data[x + 1][y]);\n    }\n\n    //left\n    if (y > 0) {\n      el.push(data[x][y - 1]);\n    }\n\n    //right\n    if (y < this.props.width - 1) {\n      el.push(data[x][y + 1]);\n    }\n\n    // top left\n    if (x > 0 && y > 0) {\n      el.push(data[x - 1][y - 1]);\n    }\n\n    // top right\n    if (x > 0 && y < this.props.width - 1) {\n      el.push(data[x - 1][y + 1]);\n    }\n\n    // bottom right\n    if (x < this.props.height - 1 && y < this.props.width - 1) {\n      el.push(data[x + 1][y + 1]);\n    }\n\n    // bottom left\n    if (x < this.props.height - 1 && y > 0) {\n      el.push(data[x + 1][y - 1]);\n    }\n\n    return el;\n  }\n\n  // reveals the whole board\n  revealBoard() {\n    let updatedData = this.state.boardData;\n    updatedData.map((datarow) => {\n      datarow.map((dataitem) => {\n        dataitem.isRevealed = true;\n      });\n    });\n    this.setState({\n      boardData: updatedData\n    })\n  }\n\n  /* reveal logic for empty cell */\n  revealEmpty(x, y, data) {\n    let area = this.traverseBoard(x, y, data);\n    area.map(value => {\n      if (!value.isFlagged && !value.isRevealed && (value.isEmpty || !value.isMine)) {\n        data[value.x][value.y].isRevealed = true;\n        if (value.isEmpty) {\n          this.revealEmpty(value.x, value.y, data);\n        }\n      }\n    });\n    return data;\n\n  }\n\n  // Handle User Events\n\n  handleCellClick(x, y) {\n\n    // check if revealed. return if true.\n    if (this.state.boardData[x][y].isRevealed || this.state.boardData[x][y].isFlagged) return null;\n\n    // check if mine. game over if true\n    if (this.state.boardData[x][y].isMine) {\n      this.setState({ gameStatus: \"You Lost.\" });\n      this.revealBoard();\n      alert(\"Game Over\");\n    }\n\n    let updatedData = this.state.boardData;\n    updatedData[x][y].isFlagged = false;\n    updatedData[x][y].isRevealed = true;\n\n    if (updatedData[x][y].isEmpty) {\n      updatedData = this.revealEmpty(x, y, updatedData);\n    }\n\n    if (this.getHidden(updatedData).length === this.props.mines) {\n      this.setState({ mineCount: 0, gameStatus: \"You Win.\" });\n      this.revealBoard();\n      alert(\"You Win\");\n    }\n\n    this.setState({\n      boardData: updatedData,\n      mineCount: this.props.mines - this.getFlags(updatedData).length,\n    });\n  }\n\n  handleContextMenu(e, x, y) {\n    e.preventDefault();\n    let updatedData = this.state.boardData;\n    let mines = this.state.mineCount;\n\n    // check if already revealed\n    if (updatedData[x][y].isRevealed) return;\n\n    if (updatedData[x][y].isFlagged) {\n      updatedData[x][y].isFlagged = false;\n      mines++;\n    } else {\n      updatedData[x][y].isFlagged = true;\n      mines--;\n    }\n\n    if (mines === 0) {\n      const mineArray = this.getMines(updatedData);\n      const FlagArray = this.getFlags(updatedData);\n      if (JSON.stringify(mineArray) === JSON.stringify(FlagArray)) {\n        this.setState({ mineCount: 0, gameStatus: \"You Win.\" });\n        this.revealBoard();\n        alert(\"You Win\");\n      }\n    }\n\n    this.setState({\n      boardData: updatedData,\n      mineCount: mines,\n    });\n  }\n\n  renderBoard(data) {\n    return data.map((datarow) => {\n      return datarow.map((dataitem) => {\n        return (\n          <div key={dataitem.x * datarow.length + dataitem.y}>\n            <Cell\n              onClick={() => this.handleCellClick(dataitem.x, dataitem.y)}\n              cMenu={(e) => this.handleContextMenu(e, dataitem.x, dataitem.y)}\n              value={dataitem}\n            />\n            {(datarow[datarow.length - 1] === dataitem) ? <div className=\"clear\" /> : \"\"}\n          </div>);\n      })\n    });\n\n  }\n\n  render() {\n    return (\n      <div className=\"board\">\n        <div className=\"game-info\">\n          <span className=\"info\">Mines remaining: {this.state.mineCount}</span>\n          <h1 className=\"info\">{this.state.gameStatus}</h1>\n        </div>\n        {\n          this.renderBoard(this.state.boardData)\n        }\n          \n        </div>\n    );\n  }\n}\n\nBoard.propTypes = {\n  height: PropTypes.number,\n  width: PropTypes.number,\n  mines: PropTypes.number,\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Board from './component/Board';\nimport './style.scss';\n\n\nclass Game extends React.Component {\n  state = {\n    height: 8,\n    width: 8,\n    mines: 10\n  };\n\n  render() {\n    const { height, width, mines } = this.state;\n    return (\n      <div className=\"game\">\n        <Board height={height} width={width} mines={mines} />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Game />, document.getElementById(\"root\"));\n"],"sourceRoot":""}